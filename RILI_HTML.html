<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="MOVABLE.js"></script>
    <link href="rili_html_css.css" rel="stylesheet">
    <link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script language="JavaScript">
       /* window.onload=function() {
            var li = document.getElementById('li1');
            li.onmouseover = function () {
                stratMove(li, {'width':400,'height':200})
            }
            li.onmouseout = function () {
                stratMove(li, {'width':200,'height':100})
            }
        }*/    </script>
    <title>JS</title>
    <style>
        * {margin: 0;padding: 0}
        /* 超小设备（手机，小于 768px） */
        /* Bootstrap 中默认情况下没有媒体查询 */

        /* 小型设备（平板电脑，768px 起） */

    </style>
    <script
            src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
        $(function() {

            //必要的数据
            //今天的年 月 日 ；本月的总天数；本月第一天是周几？？？
            var iNow=0;

            function run(n) {

                var oDate = new Date(); //定义时间
                oDate.setMonth(oDate.getMonth()+n);//设置月份
                var year = oDate.getFullYear(); //年
                var month = oDate.getMonth(); //月
                var today = oDate.getDate(); //日

                //计算本月有多少天
                var allDay = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];

                //判断闰年
                if(month == 1) {
                    if(year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {
                        allDay = 29;
                    }
                }

                //判断本月第一天是星期几
                oDate.setDate(1); //时间调整到本月第一天
                var week = oDate.getDay(); //读取本月第一天是星期几

                //console.log(week);
                $(".dateList").empty();//每次清空
                //插入空白

                for(var i = 0; i < week; i++) {
                    $(".dateList").append("<li></li>");
                }

                //日期插入到dateList
                for(var i = 1; i <= allDay; i++) {
                    $(".dateList").append("<li>" + i + "</li>")
                }
                //标记颜色=====================
                $(".dateList li").each(function(i, elm){
                    //console.log(index,elm);
                    var val = $(this).text();
                    //console.log(val);
                    if (n==0) {
                        if(val<today){
                            $(this).addClass('ccc')
                        }else if(val==today){
                            $(this).addClass('red')
                        }else if(i%7==0 || i%7==6 ){
                            $(this).addClass('sun')
                        }
                    }else if(n<0){
                        $(this).addClass('ccc')
                    }else if(i%7==0 || i%7==6 ){
                        $(this).addClass('sun')
                    }
                });

                //定义标题日期
                $("#calendar h4").text(year + "年" + (month + 1) + "月");
            };
            run(0);

            $(".a1").click(function(){
                iNow--;
                run(iNow);
            });

            $(".a2").click(function(){
                iNow++;
                run(iNow);
            })
        });

    </script>
</head>
<body>


<div class="container">

        <div id="calendar">
            <h4>2013年10月</h4>
            <a href="##" rel="external nofollow" rel="external nofollow" class="a1" id="x1">上月</a>
            <a href="##" rel="external nofollow" rel="external nofollow" class="a2" id="x2">下月</a>
            <ul class="week">
                <li>日</li>
                <li>一</li>
                <li>二</li>
                <li>三</li>
                <li>四</li>
                <li>五</li>
                <li>六</li>

            </ul>
            <ul class="dateList"></ul>
        </div>
    </div>

</div>
<script>
    let x1,x2,y1=0,y2=0;
    window.onload=function () {
        onmousedown=function (ev) {
            var oE=ev||event;
            x1=oE.clientX;
            //alert(x1);


        };
        onmouseup=function (ev) {

            var oE=ev||event;

            x2=oE.clientX;

            if(x1>x2){
                document.getElementById("x2").click();
                // alert("下个月");
            }
            else if(x1<x2){

                document.getElementById("x1").click();
                //alert("shan个月");
            }
x1=0;
            x2=0;
        };



    }
</script>
<script src="https://code.jquery.com/jquery.js"></script>
<!-- 包括所有已编译的插件 -->
<script src="js/bootstrap.min.js"></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
</body>
</html>